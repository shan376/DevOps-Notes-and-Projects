ğŸ“˜ **ğŸš€ GitOps â€“ Conceptual Explanation in Roman Urdu**

1. **GitOps Kya Hai?**
   GitOps ek DevOps practice hai jisme aap apne infrastructure aur application deployments ko Git repository mein store karte ho.
   Matlab, jo bhi aap deploy karna chahte ho (YAMLs, configuration), woh sab Git mein save hota hai.
   GitOps Tools jaise Argo CD aur Flux continuously Git repo ko monitor karte hain.
   Jaise hi Git repo mein koi change hota hai, woh automatically Kubernetes cluster mein deploy ho jata hai â€” bina manual command ke.
   â¡ï¸ Git hi "source of truth" hota hai.
   â¡ï¸ Changes sirf Git mein hote hain, aur deployment bhi wahi follow karta hai.

---

2. **Real-Life Example: ğŸ§ Bakery Example**
   Socho tum ek bakery chala rahe ho. Tumhare paas ek recipe book hai (jo ke Git repo hai).
   ğŸ‘¨â€ğŸ³ Jab chef kuch banata hai, woh recipe book se hi follow karta hai.
   Agar recipe mein koi naya item add hota hai ya koi update hoti hai, toh woh book (Git repo) mein update ho jata hai â€” chef usi ke according kaam karta hai.

ğŸ” Yehi kaam GitOps tools karte hain:
â€¢ Git repo = Recipe book
â€¢ Chef = GitOps tool (jaise Argo CD / Flux)
â€¢ Bakery = Kubernetes cluster
â€¢ Recipe update = Git mein changes
â€¢ Final product = Updated app deployed in cluster

---

3. **GitOps Ka Use Kyun Kiya Jata Hai?**
   GitOps ke kuch major faide:
4. **Automation:**
   â¤ Git mein change hote hi automatic deployment ho jata hai.
5. **Version Control:**
   â¤ Har change ka record hota hai: kisne, kab, kya change kiya.
6. **Consistency:**
   â¤ Sab kuch Git mein defined hota hai, toh koi mismatch nahi hota.
7. **Security:**
   â¤ RBAC se control hota hai ke kaun Git mein changes kar sakta hai.
8. **Disaster Recovery:**
   â¤ Agar kuch galat ho jaye, Git se aap puri infrastructure state wapas la sakte ho.

---

4. **GitOps Tools: Argo CD aur Flux**
   ğŸ” **Flux:**
   â€¢ Open-source tool hai.
   â€¢ Pull-based model use karta hai (Git repo continuously monitor karta hai).
   â€¢ Changes automatically Kubernetes cluster mein apply karta hai.

ğŸ§  **Argo CD:**
â€¢ GitOps tool hai jo UI Dashboard bhi deta hai.
â€¢ Aap sync status, app health, aur history visualize kar sakte ho.
â€¢ Manual or automatic sync options deta hai.

---

5. **GitOps ka Workflow (How GitOps Works)**
6. Developer ne application ka YAML Git repo mein push kiya.
7. GitOps tool (jaise Argo CD) repo ko monitor karta raha.
8. Jaise hi change detect hua, Argo CD ne woh changes deploy kar diye.
9. Kubernetes cluster mein new configuration apply ho gaya.
   ğŸ” Ye sab kuch automatically hota hai â€” bina manual deploy commands ke.

---

6. **Real-Life Mapping (Again)**
   | Real-Life Example | GitOps Concept |
   |--------------------|----------------|
   | Recipe Book | Git Repo |
   | Chef | GitOps Tool (Argo CD / Flux) |
   | Bakery | Kubernetes Cluster |
   | Recipe Update | Git Repo Change |

â¡ï¸ Recipe update hui = Git mein change hua
â¡ï¸ Chef ne follow kiya = GitOps tool ne change detect kiya
â¡ï¸ Naya product bana = Kubernetes ne app deploy kar diya

---

7. **Summary**
   â€¢ GitOps ek automated deployment strategy hai jo Git ko central control point banata hai.
   â€¢ Flux aur Argo CD jaise tools use hote hain Git changes ko apply karne ke liye.
   â€¢ Benefits: âœ… Automation, âœ… Versioning, âœ… Consistency, âœ… Security, âœ… Recovery

---

### **Practical Lab: GitOps Tools Setup on Ubuntu EC2 (Argo CD & Flux)**

ğŸ“Œ **Environment Setup Summary**

| Item           | Value                           |
| -------------- | ------------------------------- |
| OS             | Ubuntu 22.04 LTS                |
| Platform       | AWS EC2                         |
| Kubernetes     | Minikube (local cluster)        |
| Container Tool | Docker                          |
| GitOps Tool    | Argo CD (main), Flux (optional) |
| Access         | SSH via PuTTY (Windows)         |

---

âœ… **Section 1: Install Docker (Container Runtime)**

```bash
sudo apt update -y
sudo apt install -y docker.io
sudo systemctl start docker
sudo systemctl enable docker
docker --version  # Docker version 27.x
```

---

âœ… **Section 2: Install Minikube (Local Kubernetes)**
â— Important: Minikube should NOT be run as root user with Docker driver.

Step 1: Download & Install Minikube

```bash
curl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
sudo chmod +x minikube
sudo mv minikube /usr/local/bin/
```

Step 2: Fix â€“ "docker driver should not be used with root privileges"
Create a non-root user (set password manually like `12345678` when asked):

```bash
sudo adduser minikubeuser
sudo usermod -aG sudo minikubeuser
sudo usermod -aG docker minikubeuser
su - minikubeuser
minikube start
```

---

âœ… **Section 3: Install kubectl CLI (Kubernetes CLI)**

```bash
sudo snap install kubectl --classic
kubectl version --client  # v1.33.3
```

---

âœ… **Section 4: Install Argo CD CLI Tool**

```bash
curl -sSL https://github.com/argoproj/argo-cd/releases/download/v2.4.4/argocd-linux-amd64 -o argocd
chmod +x argocd
sudo mv argocd /usr/local/bin/
argocd version
```

âš ï¸ If you see:
`FATA[0000] Argo CD server address unspecified`
It means Argo CD CLI is installed, but not connected to server yet â€” it's normal.

---

âœ… **Section 5: Install Argo CD in Kubernetes**
Switch to correct user:

```bash
su - minikubeuser
docker ps
minikube status
minikube start
```

Install Argo CD:

```bash
kubectl create namespace argocd
kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
```

Access dashboard:

```bash
kubectl port-forward svc/argocd-server -n argocd 8081:80
```

Open browser: `http://localhost:8080`
Default login:

```bash
Username: admin
Password: (command)
kubectl get secret argocd-initial-admin-secret -n argocd -o jsonpath="{.data.password}" | base64 -d
```

---

âœ… **Section 6: Connect GitHub Repo with Argo CD**

```bash
argocd login localhost:8081 --insecure
```

Then:

```bash
argocd repo add https://github.com/shan376/myn46 \
  --username shan376 \
  --password [PASSWORD_HERE]
```

---

âœ… **Section 7: Create and Sync App in Argo CD**

```bash
mkdir -p ~/myn46/manifests
nano ~/myn46/manifests/deployment.yaml
```

(Paste YAML content â€” same as before)

Then:

```bash
git config --global user.name "Shan376"
git config --global user.email "shanzafar046@gmail.com"
git pull --rebase origin main
git init
git remote add origin https://github.com/shan376/myn46
git add .
git commit -m "Add manifests for Argo CD"
git push -u origin main
```

---

âœ… **Section 8: Test GitOps Deployment**
Edit deployment, update image version, commit & push â€” Argo CD auto-sync karega.

---

âœ… **Section 9: (Optional) Install Flux GitOps Tool**

```bash
curl -s https://fluxcd.io/install.sh | sudo bash
flux --version
```

---

âœ… **Section 10: Cleanup**

```bash
argocd app delete my-app --cascade
kubectl delete namespace argocd
flux delete kustomization my-app
```

---

ğŸ“Œ **GitOps Flow Diagram**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitHub Repo  â”‚ <--â†’ â”‚ Argo CD /    â”‚ ----â†’ â”‚ Kubernetes    â”‚
â”‚ (YAML files) â”‚       â”‚ Flux (GitOps)â”‚       â”‚ Cluster (Minikube) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†‘                                      â†“
     git push                             Auto App Deployment
```

---

âœ… **Assignment Checklist**

| Task                                    | Status |
| --------------------------------------- | ------ |
| Install Docker & Minikube               | âœ…      |
| Setup non-root user for Minikube        | âœ…      |
| Install kubectl & Argo CD CLI           | âœ…      |
| Deploy Argo CD in Minikube              | âœ…      |
| Connect GitHub Repo                     | âœ…      |
| Sync app & test GitOps flow             | âœ…      |
| Optional: Install and test Flux         | ğŸ”²     |
| Upload YAML & lab screenshots to GitHub | ğŸ”²     |

---
